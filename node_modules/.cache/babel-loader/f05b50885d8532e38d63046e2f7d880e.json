{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\hasss\\\\Documents\\\\HangIT\\\\HangITNew\\\\src\\\\App.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport Navbar from \"./components/Navbar\";\nimport Home from \"./components/Home\";\nimport Products from \"./components/Products\";\nimport ProductAdmin from \"./components/ProductAdmin\";\nimport LogIn from \"./components/auth/LogIn\";\nimport Register from \"./components/auth/Register\";\nimport ForgotPassword from \"./components/auth/ForgotPassword\";\nimport ForgotPasswordVerification from \"./components/auth/ForgotPasswordVerification\";\nimport ChangePassword from \"./components/auth/ChangePassword\";\nimport ChangePasswordConfirm from \"./components/auth/ChangePasswordConfirm\";\nimport Welcome from \"./components/auth/Welcome\";\nimport { ThemeProvider } from \"styled-components\";\nimport { GlobalStyles } from \"./components/GlobalStyles\";\nimport { lightTheme, darkTheme } from \"./components/Theme\";\nimport \"react-dates/initialize\";\nimport \"react-dropdown/style.css\";\nimport { Auth } from \"aws-amplify\";\nimport { withAuthenticator } from \"aws-amplify-react\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport Chart from \"./components/chartsTypes/Chart\";\nimport store from \"./store\";\nimport * as ActionConstructer from \"./actions/ActionConstructer\";\nlibrary.add(faEdit);\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isAuthenticated: false,\n      isAuthenticating: true,\n      user: null\n    };\n\n    _this.setAuthStatus = function (authenticated) {\n      _this.setState({\n        isAuthenticated: authenticated\n      });\n    };\n\n    _this.setUser = function (user) {\n      _this.setState({\n        user: user\n      });\n    };\n\n    _this.themeToggler = function () {\n      store.getState().darkMode === \"light\" ? store.dispatch(ActionConstructer.setDarkModeFlag(\"dark\")) : store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\n\n      _this.forceUpdate();\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var session, user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Auth.currentSession();\n\n              case 3:\n                session = _context.sent;\n                this.setAuthStatus(true);\n                store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\n                _context.next = 8;\n                return Auth.currentAuthenticatedUser();\n\n              case 8:\n                user = _context.sent;\n                this.setUser(user);\n                console.log(session);\n                this.setState({\n                  isAuthenticating: false\n                });\n                _context.t0 = store;\n                _context.t1 = ActionConstructer;\n                _context.next = 16;\n                return Auth.currentSession();\n\n              case 16:\n                _context.t2 = _context.sent.getIdToken().getJwtToken();\n                _context.t3 = _context.t1.setIdToken.call(_context.t1, _context.t2);\n\n                _context.t0.dispatch.call(_context.t0, _context.t3);\n\n                _context.next = 25;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t4 = _context[\"catch\"](0);\n\n                if (_context.t4 !== \"No current user\") {\n                  store.dispatch(ActionConstructer.setIsLogged(false));\n                  console.log(_context.t4);\n                }\n\n                store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\n\n              case 25:\n                this.setState({\n                  isAuthenticating: false\n                });\n\n              case 26:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 21]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      store.dispatch(ActionConstructer.setIsLogged(false));\n\n      if (this.state.isAuthenticated) {\n        store.dispatch(ActionConstructer.setIsLogged(true));\n      }\n\n      var authProps = {\n        isAuthenticated: this.state.isAuthenticated,\n        user: this.state.user,\n        setAuthStatus: this.setAuthStatus,\n        setUser: this.setUser\n      };\n      var charPage = null;\n\n      if (this.state.isAuthenticated) {\n        charPage = /*#__PURE__*/React.createElement(Route, {\n          exact: true,\n          path: \"/chart\",\n          render: function render(props) {\n            return /*#__PURE__*/React.createElement(Chart, Object.assign({}, props, {\n              auth: authProps,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 30\n              }\n            }));\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 9\n          }\n        });\n      }\n\n      return !this.state.isAuthenticating && /*#__PURE__*/React.createElement(ThemeProvider, {\n        theme: store.getState().darkMode === \"light\" ? lightTheme : darkTheme,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GlobalStyles, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.themeToggler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }\n      }, \"Switch Theme\"), /*#__PURE__*/React.createElement(Router, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        auth: authProps,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(Home, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 42\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/products\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(Products, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/admin\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ProductAdmin, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(LogIn, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 42\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/register\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(Register, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/forgotpassword\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ForgotPassword, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/forgotpasswordverification\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ForgotPasswordVerification, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/changepassword\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ChangePassword, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/changepasswordconfirmation\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ChangePasswordConfirm, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }), charPage, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/welcome\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(Welcome, Object.assign({}, props, {\n            auth: authProps,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }\n      })))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:/Users/hasss/Documents/HangIT/HangITNew/src/App.js"],"names":["React","Component","useState","useEffect","BrowserRouter","Router","Route","Switch","Navbar","Home","Products","ProductAdmin","LogIn","Register","ForgotPassword","ForgotPasswordVerification","ChangePassword","ChangePasswordConfirm","Welcome","ThemeProvider","GlobalStyles","lightTheme","darkTheme","Auth","withAuthenticator","library","faEdit","Chart","store","ActionConstructer","add","App","state","isAuthenticated","isAuthenticating","user","setAuthStatus","authenticated","setState","setUser","themeToggler","getState","darkMode","dispatch","setDarkModeFlag","forceUpdate","currentSession","session","currentAuthenticatedUser","console","log","getIdToken","getJwtToken","setIdToken","setIsLogged","authProps","charPage","props"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport Home from \"./components/Home\";\r\nimport Products from \"./components/Products\";\r\nimport ProductAdmin from \"./components/ProductAdmin\";\r\nimport LogIn from \"./components/auth/LogIn\";\r\nimport Register from \"./components/auth/Register\";\r\nimport ForgotPassword from \"./components/auth/ForgotPassword\";\r\nimport ForgotPasswordVerification from \"./components/auth/ForgotPasswordVerification\";\r\nimport ChangePassword from \"./components/auth/ChangePassword\";\r\nimport ChangePasswordConfirm from \"./components/auth/ChangePasswordConfirm\";\r\nimport Welcome from \"./components/auth/Welcome\";\r\n\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport { GlobalStyles } from \"./components/GlobalStyles\";\r\nimport { lightTheme, darkTheme } from \"./components/Theme\";\r\n\r\nimport \"react-dates/initialize\";\r\nimport \"react-dropdown/style.css\";\r\n\r\nimport { Auth } from \"aws-amplify\";\r\nimport { withAuthenticator } from \"aws-amplify-react\";\r\n\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Chart from \"./components/chartsTypes/Chart\";\r\n\r\nimport store from \"./store\";\r\nimport * as ActionConstructer from \"./actions/ActionConstructer\";\r\n\r\nlibrary.add(faEdit);\r\n\r\nclass App extends Component {\r\n  state = {\r\n    isAuthenticated: false,\r\n    isAuthenticating: true,\r\n    user: null,\r\n  };\r\n\r\n  setAuthStatus = (authenticated) => {\r\n    this.setState({ isAuthenticated: authenticated });\r\n  };\r\n\r\n  setUser = (user) => {\r\n    this.setState({ user: user });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const session = await Auth.currentSession();\r\n\r\n      this.setAuthStatus(true);\r\n\r\n      store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\r\n      const user = await Auth.currentAuthenticatedUser();\r\n      this.setUser(user);\r\n      console.log(session);\r\n      this.setState({ isAuthenticating: false });\r\n      store.dispatch(\r\n        ActionConstructer.setIdToken(\r\n          (await Auth.currentSession()).getIdToken().getJwtToken()\r\n        )\r\n      );\r\n    } catch (error) {\r\n      if (error !== \"No current user\") {\r\n        store.dispatch(ActionConstructer.setIsLogged(false));\r\n        console.log(error);\r\n      }\r\n      store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\r\n    }\r\n\r\n    this.setState({ isAuthenticating: false });\r\n  }\r\n\r\n  themeToggler = () => {\r\n    store.getState().darkMode === \"light\"\r\n      ? store.dispatch(ActionConstructer.setDarkModeFlag(\"dark\"))\r\n      : store.dispatch(ActionConstructer.setDarkModeFlag(\"light\"));\r\n    this.forceUpdate();\r\n  };\r\n\r\n  render() {\r\n    store.dispatch(ActionConstructer.setIsLogged(false));\r\n    if (this.state.isAuthenticated) {\r\n      store.dispatch(ActionConstructer.setIsLogged(true));\r\n    }\r\n\r\n    const authProps = {\r\n      isAuthenticated: this.state.isAuthenticated,\r\n      user: this.state.user,\r\n      setAuthStatus: this.setAuthStatus,\r\n      setUser: this.setUser,\r\n    };\r\n    var charPage = null;\r\n    if (this.state.isAuthenticated) {\r\n      charPage = (\r\n        <Route\r\n          exact\r\n          path=\"/chart\"\r\n          render={(props) => <Chart {...props} auth={authProps} />}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      !this.state.isAuthenticating && (\r\n        <ThemeProvider\r\n          theme={store.getState().darkMode === \"light\" ? lightTheme : darkTheme}\r\n        >\r\n          <>\r\n            <GlobalStyles />\r\n            <div className=\"App\">\r\n              <button onClick={this.themeToggler}>Switch Theme</button>\r\n              <Router>\r\n                <div>\r\n                  <Navbar auth={authProps} />\r\n                  <Switch>\r\n                    <Route\r\n                      exact\r\n                      path=\"/\"\r\n                      render={(props) => <Home {...props} auth={authProps} />}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/products\"\r\n                      render={(props) => (\r\n                        <Products {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/admin\"\r\n                      render={(props) => (\r\n                        <ProductAdmin {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/login\"\r\n                      render={(props) => <LogIn {...props} auth={authProps} />}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/register\"\r\n                      render={(props) => (\r\n                        <Register {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/forgotpassword\"\r\n                      render={(props) => (\r\n                        <ForgotPassword {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/forgotpasswordverification\"\r\n                      render={(props) => (\r\n                        <ForgotPasswordVerification\r\n                          {...props}\r\n                          auth={authProps}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/changepassword\"\r\n                      render={(props) => (\r\n                        <ChangePassword {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/changepasswordconfirmation\"\r\n                      render={(props) => (\r\n                        <ChangePasswordConfirm {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n\r\n                    {charPage}\r\n\r\n                    <Route\r\n                      exact\r\n                      path=\"/welcome\"\r\n                      render={(props) => (\r\n                        <Welcome {...props} auth={authProps} />\r\n                      )}\r\n                    />\r\n                  </Switch>\r\n                </div>\r\n              </Router>\r\n            </div>\r\n          </>\r\n        </ThemeProvider>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}
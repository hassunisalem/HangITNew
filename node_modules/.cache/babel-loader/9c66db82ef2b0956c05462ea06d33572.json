{"ast":null,"code":"/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { Authenticator } from './Authenticator';\nexport { Authenticator } from './Authenticator';\nexport { AuthPiece } from './AuthPiece';\nexport { SignIn } from './SignIn';\nexport { ConfirmSignIn } from './ConfirmSignIn';\nexport { SignOut } from './SignOut';\nexport { RequireNewPassword } from './RequireNewPassword';\nexport { SignUp } from './SignUp';\nexport { ConfirmSignUp } from './ConfirmSignUp';\nexport { VerifyContact } from './VerifyContact';\nexport { ForgotPassword } from './ForgotPassword';\nexport { Greetings } from './Greetings';\nexport { FederatedSignIn, FederatedButtons } from './FederatedSignIn';\nexport { TOTPSetup } from './TOTPSetup';\nexport { Loading } from './Loading';\nexport * from './Provider';\nexport * from './common/types';\nexport function withAuthenticator(Comp, includeGreetings, authenticatorComponents, federated, theme, signUpConfig) {\n  if (includeGreetings === void 0) {\n    includeGreetings = false;\n  }\n\n  if (authenticatorComponents === void 0) {\n    authenticatorComponents = [];\n  }\n\n  if (federated === void 0) {\n    federated = null;\n  }\n\n  if (theme === void 0) {\n    theme = null;\n  }\n\n  if (signUpConfig === void 0) {\n    signUpConfig = {};\n  }\n\n  return (\n    /** @class */\n    function (_super) {\n      __extends(class_1, _super);\n\n      function class_1(props) {\n        var _this = _super.call(this, props) || this;\n\n        _this.handleAuthStateChange = _this.handleAuthStateChange.bind(_this);\n        _this.state = {\n          authState: props.authState || null,\n          authData: props.authData || null\n        };\n        _this.authConfig = {};\n\n        if (typeof includeGreetings === 'object' && includeGreetings !== null) {\n          _this.authConfig = Object.assign(_this.authConfig, includeGreetings);\n        } else {\n          _this.authConfig = {\n            includeGreetings: includeGreetings,\n            authenticatorComponents: authenticatorComponents,\n            federated: federated,\n            theme: theme,\n            signUpConfig: signUpConfig\n          };\n        }\n\n        return _this;\n      }\n\n      class_1.prototype.handleAuthStateChange = function (state, data) {\n        this.setState({\n          authState: state,\n          authData: data\n        });\n      };\n\n      class_1.prototype.render = function () {\n        var _a = this.state,\n            authState = _a.authState,\n            authData = _a.authData;\n\n        if (authState === 'signedIn') {\n          return React.createElement(React.Fragment, null, this.authConfig.includeGreetings ? React.createElement(Authenticator, __assign({}, this.props, {\n            theme: this.authConfig.theme,\n            federated: this.authConfig.federated || this.props.federated,\n            hideDefault: this.authConfig.authenticatorComponents && this.authConfig.authenticatorComponents.length > 0,\n            signUpConfig: this.authConfig.signUpConfig,\n            usernameAttributes: this.authConfig.usernameAttributes,\n            onStateChange: this.handleAuthStateChange,\n            children: this.authConfig.authenticatorComponents || []\n          })) : null, React.createElement(Comp, __assign({}, this.props, {\n            authState: authState,\n            authData: authData,\n            onStateChange: this.handleAuthStateChange\n          })));\n        }\n\n        return React.createElement(Authenticator, __assign({}, this.props, {\n          theme: this.authConfig.theme,\n          federated: this.authConfig.federated || this.props.federated,\n          hideDefault: this.authConfig.authenticatorComponents && this.authConfig.authenticatorComponents.length > 0,\n          signUpConfig: this.authConfig.signUpConfig,\n          usernameAttributes: this.authConfig.usernameAttributes,\n          onStateChange: this.handleAuthStateChange,\n          children: this.authConfig.authenticatorComponents || []\n        }));\n      };\n\n      return class_1;\n    }(React.Component)\n  );\n}\n\nvar AuthenticatorWrapper =\n/** @class */\nfunction (_super) {\n  __extends(AuthenticatorWrapper, _super);\n\n  function AuthenticatorWrapper(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      auth: 'init'\n    };\n    _this.handleAuthState = _this.handleAuthState.bind(_this);\n    _this.renderChildren = _this.renderChildren.bind(_this);\n    return _this;\n  }\n\n  AuthenticatorWrapper.prototype.handleAuthState = function (state, data) {\n    this.setState({\n      auth: state,\n      authData: data\n    });\n  };\n\n  AuthenticatorWrapper.prototype.renderChildren = function () {\n    // @ts-ignore\n    return this.props.children(this.state.auth);\n  };\n\n  AuthenticatorWrapper.prototype.render = function () {\n    return React.createElement(\"div\", null, React.createElement(Authenticator, __assign({}, this.props, {\n      onStateChange: this.handleAuthState\n    })), this.renderChildren());\n  };\n\n  return AuthenticatorWrapper;\n}(React.Component);\n\nexport { AuthenticatorWrapper };","map":null,"metadata":{},"sourceType":"module"}